import { useEffect, useState } from "react";

const SearchForm = ({ isSearchVisible }) => {
  const [searchValue, setSearchValue] = useState('');
  const [focusClass, setFocusClass] = useState('');

  const clearSearch = e => {
    e.preventDefault();

    setSearchValue('');
  }

  return (
    <form
      action="https://shop.backyardbrains.com/search"
      className={`search-form ${isSearchVisible ? 'search-form_active' : ''} ${focusClass}`}
    >
      <div className="search-form__input-wrapper">
        <input
          type="text"
          name="q"
          className="search-form__input"
          placeholder="Search for Backyard Brains"
          onChange={e => setSearchValue(e.target.value)}
          value={searchValue}
          onFocus={() => setFocusClass('search-form_focused')}
          onBlur={() => setFocusClass('')}
        />
        {searchValue && (
          <a
            href="#"
            className="search-form__clear"
            onClick={clearSearch}
          >
            <svg
              width="12.0115966px"
              height="12.00989px"
              viewBox="0 0 12.0115966 12.00989"
              className="search-form__clear-icon"
            >
              <g
                stroke="none"
                strokeWidth="1"
                fill="none"
                fillRule="evenodd"
              >
                <g
                  transform="translate(-934.000000, -242.000000)"
                  fill="#A8A8A8"
                  fillRule="nonzero"
                >
                  <g transform="translate(132.000000, 216.000000)">
                    <g transform="translate(802.000000, 26.000000)">
                      <path d="M7.41579832,6.00409163 L11.7157983,1.71409163 C12.1079205,1.32196946 12.1079205,0.686213802 11.7157983,0.294091629 C11.3236762,-0.0980305431 10.6879205,-0.0980305431 10.2957983,0.294091629 L6.00579832,4.59409163 L1.71579832,0.294091629 C1.32367615,-0.0980305331 0.687920503,-0.0980305284 0.295798335,0.29409164 C-0.0963238333,0.686213808 -0.0963238381,1.32196946 0.295798324,1.71409163 L4.59579832,6.00409163 L0.295798324,10.2940916 C0.106485674,10.4818582 0,10.7374541 0,11.0040916 C0,11.2707292 0.106485674,11.526325 0.295798324,11.7140916 C0.483564924,11.9034043 0.739160788,12.00989 1.00579832,12.00989 C1.27243586,12.00989 1.52803172,11.9034043 1.71579832,11.7140916 L6.00579832,7.41409163 L10.2957983,11.7140916 C10.4835649,11.9034043 10.7391608,12.00989 11.0057983,12.00989 C11.2724359,12.00989 11.5280317,11.9034043 11.7157983,11.7140916 C11.905111,11.526325 12.0115966,11.2707292 12.0115966,11.0040916 C12.0115966,10.7374541 11.905111,10.4818582 11.7157983,10.2940916 L7.41579832,6.00409163 Z" />
                    </g>
                  </g>
                </g>
              </g>
            </svg>
          </a>
        )}
      </div>
      <div className="search-form__note">
        <div className="search-form__note-label">Hit Enter for Search</div>
        <svg
          width="22px"
          height="14px"
          viewBox="0 0 22 14"
          className="search-form__note-icon"
        >
          <g
            stroke="none"
            strokeWidth="1"
            fill="none"
            fillRule="evenodd"
          >
            <g
              transform="translate(-1110.000000, -241.000000)"
              fill="#FF805F"
              fillRule="nonzero"
            >
              <g transform="translate(132.000000, 216.000000)">
                <g transform="translate(978.000000, 25.000000)">
                  <path d="M5.71,4.29 C5.5222334,4.10068735 5.26663754,3.99420168 5,3.99420168 C4.73336246,3.99420168 4.4777666,4.10068735 4.29,4.29 C4.19895937,4.38510371 4.12759439,4.49724868 4.08,4.62 C3.92340327,4.9923971 4.00625544,5.4224393 4.29,5.71 C4.38720094,5.79833094 4.49881511,5.86935813 4.62,5.92 C4.73867938,5.97598135 4.86882347,6.00338011 5,6 C5.33258473,5.99834325 5.6425818,5.83144326 5.82706891,5.5547126 C6.01155601,5.27798195 6.04638789,4.9276385 5.92,4.62 C5.87240561,4.49724868 5.80104063,4.38510371 5.71,4.29 Z M9,6 C9.33258473,5.99834325 9.6425818,5.83144326 9.82706891,5.5547126 C10.011556,5.27798195 10.0463879,4.9276385 9.92,4.62 C9.87240561,4.49724868 9.80104063,4.38510371 9.71,4.29 C9.47753826,4.04864503 9.13964016,3.93976675 8.81,4 C8.74376529,4.00927083 8.67954668,4.02955039 8.62,4.06 L8.44,4.15 L8.29,4.27 C8.10252859,4.46664964 7.99858069,4.72831159 7.99998565,5 C7.99998565,5.55228475 8.44771525,6 9,6 Z M5.38,8.08 C5.13653864,7.97998198 4.86346136,7.97998198 4.62,8.08 C4.24657449,8.2334036 4.00201515,8.59629811 4,9 C4.00165675,9.33258473 4.16855674,9.6425818 4.4452874,9.82706891 C4.72201805,10.011556 5.0723615,10.0463879 5.38,9.92 C5.50118489,9.86935813 5.61279906,9.79833094 5.71,9.71 C5.89718651,9.52128117 6.00153676,9.26580298 6.00001674,9 C6.00153676,8.73419702 5.89718651,8.47871883 5.71,8.29 C5.61613108,8.19739731 5.5036434,8.12581424 5.38,8.08 L5.38,8.08 Z M13,8 L9,8 C8.44771525,8 8,8.44771525 8,9 C8,9.55228475 8.44771525,10 9,10 L13,10 C13.5522847,10 14,9.55228475 14,9 C14,8.44771525 13.5522847,8 13,8 Z M13.71,4.29 C13.5222334,4.10068735 13.2666375,3.99420168 13,3.99420168 C12.7333625,3.99420168 12.4777666,4.10068735 12.29,4.29 C12.1989594,4.38510371 12.1275944,4.49724868 12.08,4.62 C11.9205223,4.99454553 12.0040064,5.42838131 12.291097,5.71699261 C12.5781876,6.00560391 13.0115763,6.09137875 13.3869591,5.93388198 C13.7623419,5.77638521 14.0047857,5.407056 14,5 C14.0033801,4.86882347 13.9759814,4.73867938 13.92,4.62 C13.8724056,4.49724868 13.8010406,4.38510371 13.71,4.29 Z M17.56,8.17 C17.5042548,8.13215359 17.4437243,8.10188832 17.38,8.08 C17.1365386,7.97998198 16.8634614,7.97998198 16.62,8.08 C16.4988151,8.13064187 16.3872009,8.20166906 16.29,8.29 C16.1072663,8.48163379 16.0036835,8.73523302 16,9 C16,9.55228475 16.4477153,10 17,10 C17.5522847,10 18,9.55228475 18,9 C17.9963165,8.73523302 17.8927337,8.48163379 17.71,8.29 L17.56,8.17 Z M19,0 L3,0 C1.34314575,0 0,1.34314575 0,3 L0,11 C0,12.6568542 1.34314575,14 3,14 L19,14 C20.6568542,14 22,12.6568542 22,11 L22,3 C22,1.34314575 20.6568542,0 19,0 Z M20,11 C20,11.5522847 19.5522847,12 19,12 L3,12 C2.44771525,12 2,11.5522847 2,11 L2,3 C2,2.44771525 2.44771525,2 3,2 L19,2 C19.5522847,2 20,2.44771525 20,3 L20,11 Z M17.71,4.29 C17.4239095,4.00154005 16.9917332,3.91483814 16.6165185,4.07062905 C16.2413038,4.22641996 15.9976374,4.59373493 16,5 C15.9952143,5.407056 16.2376581,5.77638521 16.6130409,5.93388198 C16.9884237,6.09137875 17.4218124,6.00560391 17.708903,5.71699261 C17.9959936,5.42838131 18.0794777,4.99454553 17.92,4.62 C17.8724056,4.49724868 17.8010406,4.38510371 17.71,4.29 L17.71,4.29 Z" />
                </g>
              </g>
            </g>
          </g>
        </svg>
      </div>
    </form>
  );
}

export default SearchForm;
